$(()=>{$.scrollify({section:"section",sectionName:"section-name",interstitialSection:"",easing:"easeOutExpo",scrollSpeed:1100,offset:0,scrollbars:!0,standardScrollElements:"",setHeights:!1,overflowScroll:!0,updateHash:!0,touchScroll:!0,before:()=>{document.getElementById('homeDownArrow').classList.remove('animated','infinite','bounceInUp')},after:()=>{if(window.location.hash==="#pageOne"){$('#siteHeader').removeClass('fadeInDown');$('#siteHeader').addClass('fadeOutUp');$('#currentPageTitle').text('Home')}else if(window.location.hash==="#pageTwo"){$('#siteHeader').removeClass('d-none');$('#siteHeader').removeClass('fadeOutUp');$('#siteHeader').addClass('fadeInDown');$('#currentPageTitle').text('Route');$('#progressBar').attr("class","c100 p20 small");$('#progressText').text('20%')}else if(window.location.hash==="#pageThree"){$('#siteHeader').removeClass('d-none');$('#siteHeader').addClass('fadeInDown');$('#currentPageTitle').text('Vehicle');$('#progressBar').attr("class","c100 p40 small");$('#progressText').text('40%')}else if(window.location.hash==="#pageFour"){$('#siteHeader').removeClass('d-none');$('#siteHeader').addClass('fadeInDown');$('#currentPageTitle').text('Overview');$('#progressBar').attr("class","c100 p60 small");$('#progressText').text('60%')}else if(window.location.hash==="#pageFive"){$('#siteHeader').removeClass('d-none');$('#siteHeader').addClass('fadeInDown');$('#currentPageTitle').text('Confirm');$('#progressBar').attr("class","c100 p80 small");$('#progressText').text('80%')}else if(window.location.hash==="#pageSix"){$('#siteHeader').removeClass('d-none');$('#siteHeader').addClass('fadeInDown');$('#currentPageTitle').text('Confirm');$('#progressBar').attr("class","c100 p90 small");$('#progressText').text('90%')}else if(window.location.hash==="#pageSeven"){$('#siteHeader').removeClass('d-none');$('#siteHeader').addClass('fadeInDown');$('#currentPageTitle').text('Complete');$('#progressBar').attr("class","c100 p100 small");$('#progressText').text('100%')}},afterResize:()=>{},afterRender:()=>{}})});$('#btnDisableScrollify').click(()=>{$.scrollify.disable()});$('.prev').click(()=>{$.scrollify.move('#pageOne')});$('.next').click(()=>{$.scrollify.next()});$(()=>{$('#datetimepickerPickUp').datetimepicker({format:'DD/MM/YYYY HH:mm',});$('#datetimepickerDropOff').datetimepicker({format:'DD/MM/YYYY HH:mm',useCurrent:!1});$('#datetimepickerDOB').datetimepicker({format:'DD/MM/YYYY',});$("#datetimepickerPickUp").on("change.datetimepicker",(e)=>{$('#datetimepickerDropOff').datetimepicker('minDate',moment(e.date).add(chosenDays.textContent,'days'));$('#datetimepickerDropOff').datetimepicker('date',moment(e.date).add(chosenDays.textContent,'days'))})});document.addEventListener('DOMContentLoaded',()=>{loadAllRoutes();backgroundImageCarousel()});function backgroundImageCarousel(){if(window.innerWidth>768){const allRouteImages=[];for(let i=0;i<routesNZ.length;i++){for(let j=0;j<routesNZ[i].itinerary.length;j++){if(typeof routesNZ[i].itinerary[j][4]==='undefined'||typeof routesNZ[i].imgPath==='undefined'){console.log('Houston we have a problem')}else{if(routesNZ[i].itinerary[j][4]!==''){const fullImgPath=routesNZ[i].imgPath+routesNZ[i].itinerary[j][4];allRouteImages.push(fullImgPath)}}}}
const body=document.querySelector('.body-background-carousel');setInterval(()=>{let count=getRandomNum(0,allRouteImages.length);const bgImg=new Image();bgImg.src=allRouteImages[count];setTimeout(()=>{body.style.background='url("'+bgImg.src+'") no-repeat center center';body.style.backgroundAttachment='fixed';body.style.backgroundSize='cover'},1000)},5000)}}
function getRandomNum(min,max){return Math.floor(Math.random()*(max-min)+min)}
const UInumDays=document.getElementById('UInumDays'),UIsliderDays=document.getElementById('sliderDaysRange'),badgeNorth=document.getElementById('badgeNorth'),badgeSouth=document.getElementById('badgeSouth'),badgeBoth=document.getElementById('badgeBoth'),badgeTotal=document.getElementById('badgeTotal');let chosenDays=document.getElementById('chosenDays'),chosenRoute=document.getElementById('chosenRoute'),chosenPeople=document.getElementById('chosenPeople'),chosenVehicle=document.getElementById('chosenVehicle');let chosenRouteObject;const routesNorth=routesNZ.filter(route=>route.island==='north');const routesSouth=routesNZ.filter(route=>route.island==='south');const routesBoth=routesNZ.filter(route=>route.island==='both');function loadAllRoutes(){for(let i=0;i<routesNorth.length;i++){createRouteThumbs(i,'north-island-thumbs',routesNorth,northIslandThumbContainer)}
for(let i=0;i<routesSouth.length;i++){createRouteThumbs(i,'south-island-thumbs',routesSouth,southIslandThumbContainer)}
for(let i=0;i<routesBoth.length;i++){createRouteThumbs(i,'both-island-thumbs',routesBoth,bothIslandThumbContainer)}
updateBadge()}
function createRouteThumbs(i,islandClass,routeArr,thumbContainer){const div=document.createElement('div');div.classList.add('col-6','col-md-3','px-2','mb-3');div.innerHTML=`
  <div class="${islandClass} card">
    <img class="card-img-top" src="${routeArr[i].imgPath + routeArr[i].images[0]}" alt="" name="${routeArr[i].route}">
    <div class="card-route-inner-shadow">
      <div class="card-route-title py-1 m-0">
        <h4>${routeArr[i].route}</h4>
      </div>
    </div>
  </div>
  `;thumbContainer.appendChild(div)}
UIsliderDays.addEventListener('input',()=>{UInumDays.textContent=UIsliderDays.value+' Days';chosenDays.textContent=UIsliderDays.value;filterRoutes(routesNorth,document.querySelectorAll('.north-island-thumbs'));filterRoutes(routesSouth,document.querySelectorAll('.south-island-thumbs'));filterRoutes(routesBoth,document.querySelectorAll('.both-island-thumbs'));updateBadge()});function filterRoutes(r,t){for(let i=0;i<r.length;i++){if(UIsliderDays.value<r[i].days&&!t[i].classList.contains('d-none')){t[i].classList.add('d-none')}
if(UIsliderDays.value>=r[i].days&&t[i].classList.contains('d-none')){t[i].classList.remove('d-none')}}}
function updateBadge(){badgeNorth.textContent=northIslandThumbContainer.childElementCount-document.querySelectorAll('#northIslandThumbContainer .d-none').length;badgeSouth.textContent=southIslandThumbContainer.childElementCount-document.querySelectorAll('#southIslandThumbContainer .d-none').length;badgeBoth.textContent=bothIslandThumbContainer.childElementCount-document.querySelectorAll('#bothIslandThumbContainer .d-none').length;badgeTotal.innerHTML=` <span class="text-muted"><small>(${parseInt(badgeNorth.textContent) + parseInt(badgeSouth.textContent) + parseInt(badgeBoth.textContent)} Routes)</small></span>`}
const UIsliderPeople=document.getElementById('sliderPeopleRange');const UInumPeople=document.getElementById('numPeople');const transportThumbContainer=document.getElementById('transportThumbContainer');transportThumbContainer.addEventListener('click',showTransportModal);UIsliderPeople.addEventListener('input',()=>{if(UIsliderPeople.value==='0'){UInumPeople.textContent='Drag the slider'}else if(UIsliderPeople.value==='1'){UInumPeople.textContent=UIsliderPeople.value+' Person'}else{UInumPeople.textContent=UIsliderPeople.value+' People'}
filterTransport(UIsliderPeople.value);chosenPeople.textContent=UIsliderPeople.value});function filterTransport(num){while(transportThumbContainer.firstChild){transportThumbContainer.removeChild(transportThumbContainer.firstChild)}
for(let i=0;i<transportOptions.length;i++){if(num>=transportOptions[i].minPeople&&num<=transportOptions[i].maxPeople){if(UIsliderDays.value>=transportOptions[i].minDays&&UIsliderDays.value<=transportOptions[i].maxDays){createVehicle(transportOptions[i])}}}}
function createVehicle(v){const div=document.createElement('div');div.classList.add('col-6','col-md-3','px-2','mb-3');div.innerHTML=`
    <div class="div1 transport-thumb card shadow">
      <img class="card-img-top" src="${v.thumb}" alt="${v.alt}" name="${v.name}">
    </div>
  `;transportThumbContainer.appendChild(div)}
function showTransportModal(e){try{transportOptions.forEach(vehicle=>{if(vehicle.name===e.target.name){calculateTotal(vehicle);modalTitle.textContent=e.target.name;chosenVehicle.textContent=e.target.name;while(modalContent.firstChild){modalContent.removeChild(modalContent.firstChild)}
const imgDiv=document.createElement('div');imgDiv.innerHTML=`
          <img class="img-fluid" src="${vehicle.images[0]}" alt="${vehicle.alt}">
          `;modalContent.appendChild(imgDiv);const infoDiv=document.createElement('div');infoDiv.classList.add('mt-4');infoDiv.innerHTML=`
          <p>${vehicle.name}</p>
          <p>Price per day: <span class="">$${vehicle.price}</span> NZD</p>
          <p>Fuel consumption: <span class="">${vehicle.fuelConsumption}</span> Liter per 100Km</p>
          <p>If you drive the route "${chosenRoute.textContent}", which is ${chosenRouteObject.distance} Km, 
          and will spend ${UIsliderDays.value} days, the hire cost for this vehicle comes to $${calcBasePrice}.<br>
          Additionally, you will use ${((chosenRouteObject.distance / 100) * vehicle.fuelConsumption).toFixed(2)} Liters of ${vehicle.fuelType}.
          This will cost you an extra $${calcFuelPrice}.
          </p>
          `;modalContent.appendChild(infoDiv);modalConfirm.classList.add('modalVehicle');document.querySelector('.modalVehicle').addEventListener('click',()=>{$.scrollify.enable();$.scrollify.move("#pageFour")})}});showModal()}
catch(error){alert('Go back to select days and route first')}}
const modalTitle=document.getElementById('modalTitle'),modalContent=document.getElementById('modalContent'),modalConfirm=document.querySelector('.modalConfirm'),northIslandThumbContainer=document.getElementById('northIslandThumbContainer'),southIslandThumbContainer=document.getElementById('southIslandThumbContainer'),bothIslandThumbContainer=document.getElementById('bothIslandThumbContainer');northIslandThumbContainer.addEventListener('click',showRouteModal);southIslandThumbContainer.addEventListener('click',showRouteModal);bothIslandThumbContainer.addEventListener('click',showRouteModal);function showModal(){$('#modalRoute').modal('show');$('#modalRoute').on('shown.bs.modal',(e)=>{$.scrollify.disable()});$('#modalRoute').on('hidden.bs.modal',(e)=>{$.scrollify.enable()});modalConfirm.addEventListener('click',()=>{$.scrollify.enable();$.scrollify.next()})}
function showRouteModal(e){let eTarget;if(e.target.nodeName==='H4'){eTarget=e.target.parentElement.parentElement.parentElement.firstElementChild.name}else if(e.target.nodeName==='DIV'&&e.target.classList.contains('card-route-title')){eTarget=e.target.parentElement.parentElement.firstElementChild.name}else{eTarget=e.target.parentElement.firstElementChild.name}
routesNZ.forEach(routeObject=>{if(routeObject.route===eTarget){modalTitle.textContent=routeObject.route+' - '+routeObject.distance+' Km'+' - '+routeObject.days+' days';chosenRoute.textContent=routeObject.route;chosenRouteObject=routeObject;formLocationPickup.value=chosenRouteObject.from;formLocationDropOff.value=chosenRouteObject.to;createRouteInfo(routeObject);createItinerary(routeObject)}});showModal()}
function createRouteInfo(r){while(modalContent.firstChild){modalContent.removeChild(modalContent.firstChild)}
const routeMap=document.createElement('div');routeMap.innerHTML=`<img class="img-fluid" src="${r.imgPath + r.images[2]}" alt="map">`;const routeDescription=document.createElement('div');routeDescription.innerHTML=`<p class="">${r.description}</p>`;const modalBtn=document.createElement('div');modalBtn.classList.add('modal-footer');modalBtn.innerHTML=`
  <button type="button" class="btn btn-secondary" data-dismiss="modal" id="">Close</button>
  <button type="button" class="btn btn-primary shadow-lg modalConfirm" data-dismiss="modal" id="">Drive This</button>
  `;modalContent.append(routeMap,routeDescription,modalBtn);document.querySelector('.modal-footer').lastElementChild.addEventListener('click',()=>{$.scrollify.enable();$.scrollify.next()})}
function createItinerary(r){const containerDiv=document.createElement('div');containerDiv.classList.add('list-itinerary');r.itinerary.forEach(day=>{const dayNum=document.createElement('span');dayNum.innerHTML='Day '+day[0];const dayTitle=document.createElement('h3');dayTitle.innerHTML=day[1];const dayDistance=document.createElement('span');if(day[2]!==0){dayDistance.innerHTML=day[2]+'Km - '}
const dayDrivingTime=document.createElement('span');if(!day[3]){dayDrivingTime.innerHTML='This is a non-driving day'}else{dayDrivingTime.innerHTML=day[3]}
const dayImage=document.createElement('div');if(day[4]){dayImage.innerHTML=`<img src="${r.imgPath + day[4]}" class="img-fluid mt-2 mb-5">`}
containerDiv.append(dayNum,dayTitle,dayDistance,dayDrivingTime,dayImage)});modalContent.appendChild(containerDiv)}
const totalBasePrice=document.getElementById('totalBasePrice'),totalFuel=document.getElementById('totalFuel'),totalInsurancePrice=document.getElementById('totalInsurancePrice'),imgOverviewRoute=document.getElementById('imgOverviewRoute'),imgOverviewVehicle=document.getElementById('imgOverviewVehicle'),totalPrice=document.getElementById('totalPrice');let calcBasePrice=0,calcFuelPrice=0,calcInsurance=0;document.getElementById('changeDays').addEventListener('click',()=>$.scrollify.move("#pageTwo"));document.getElementById('changeRoute').addEventListener('click',()=>$.scrollify.move("#pageTwo"));document.getElementById('changePeople').addEventListener('click',()=>$.scrollify.move("#pageThree"));document.getElementById('changeVehicle').addEventListener('click',()=>$.scrollify.move("#pageThree"));function calculateTotal(vehicle){calcBasePrice=vehicle.price*UIsliderDays.value;calcFuelPrice=(((chosenRouteObject.distance/100)*vehicle.fuelConsumption)*vehicle.fuelPrice).toFixed(2);calcInsurance=UIsliderDays.value*vehicle.insurance;const calcTotal=parseFloat(calcBasePrice)+parseFloat(calcFuelPrice)+parseFloat(calcInsurance);totalBasePrice.textContent=`${vehicle.name} for ${UIsliderDays.value} days = $${calcBasePrice} NZD`;totalFuel.textContent=`$${calcFuelPrice} NZD`;totalInsurancePrice.textContent=`${UIsliderDays.value} days, at $${vehicle.insurance} per day = $${calcInsurance} NZD`;totalPrice.textContent=`$${calcTotal.toFixed(2)}`;imgOverviewRoute.src=chosenRouteObject.imgPath+chosenRouteObject.images[1];imgOverviewRoute.nextElementSibling.textContent=chosenRouteObject.route;imgOverviewVehicle.src=vehicle.images[0];imgOverviewVehicle.nextElementSibling.textContent=vehicle.name}
const bookingForm=document.getElementById('bookingForm');bookingForm.addEventListener('submit',function(e){if(bookingForm.checkValidity()===!1){e.stopPropagation()}
e.preventDefault();$.scrollify.next();bookingForm.classList.add('was-validated')},!1);const formLocationPickup=document.getElementById('formLocationPickup'),formLocationDropOff=document.getElementById('formLocationDropOff'),btnConfirmBooking=document.getElementById('btnConfirmBooking'),bookingForm2=document.getElementById('bookingForm2');bookingForm2.addEventListener('submit',(e)=>{e.preventDefault();$.scrollify.next()});btnConfirmBooking.addEventListener('click',()=>{$.scrollify.next()});const btnWatchShow=document.getElementById('btnWatchShow');const destroyable=document.querySelector('.destroyable');const page7=document.getElementById('page7');btnWatchShow.addEventListener('click',()=>{if(window.innerWidth<768){alert('The slide show is only available on desktop.')}else{page7.removeChild(destroyable)}})